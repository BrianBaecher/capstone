@page "/news"
@using Capstone.Shared.Models
@inject HttpClient http
@inject NavigationManager navManager

@if (storyResponse == null)
{
	<RadzenIcon Icon="cycle" class="spin" />
}
else
{
	foreach (var item in storyResponse.Results)
	{
		if (item.Section != "admin")
		{
			<Capstone.Components.TravelArticle TravelStory="item"
											    />
		}
	}
}

@code {
	TravelStoryResponse? storyResponse;

	protected override async Task OnInitializedAsync()
	{
		storyResponse = await http.GetFromJsonAsync<TravelStoryResponse>("travelstories.json");

		Console.WriteLine("derp");
	}

	private void OnArticleNavigate(string url)
	{
		// used as callback for each travelarticle component. opens provided url in new browser tab.
		navManager.NavigateTo(url, true);
	}

}
